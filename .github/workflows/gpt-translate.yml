# .github/workflows/gpt-translate.yml

name: GPT Translate

on:
  issue_comment:
    type: [created]
    
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  gpt_translate:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
      
      - name: get changed files name
        id: changed_files
        run: echo "name=files::$(git diff-tree --no-commit-id --name-only -r ${{ github.sha }})" >> $GITHUB_OUTPUT

      - name: Run GPT Translate
        uses: 3ru/gpt-translate@v1.0
        with:
          apikey: ${{ secrets.OPENAI_API_KEY }}
          
        if: |
          contains(github.event.comment.body, '/gpt-translate') || 
          contains(github.event.comment.body, '/gt')
          
          for changed_file in ${{ steps.changed_files.outputs.files }}
          /gpt-translate $changed_file /DE/$changed_file German
          /gpt-translate $changed_file /IT/$changed_file Italian
          /gpt-translate $changed_file /FR/$changed_file French
          
        #  /gpt-translate [input filepath] [output filepath] [target language]



